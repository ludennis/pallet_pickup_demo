<root main_tree_to_execute = "DropoffPallet" >
  <BehaviorTree ID="DropoffPallet">
    <Sequence>
      <ForkActionNode
        name="LowerForkCloseToGround"
        TargetHeight="0.1"/>
      <SleepNode
        name="SleepBeforePalletPickup"
        SleepTimeInSeconds="4.0"/>
      <WaitForAprilTagDetection
        name="WaitForAprilTag"
        AprilTagTfName="Dropoff"
        MapTfName="map"
        Offset="0.26"
        AprilTagPose="{DetectedDropoffPose}"/>
      <ForkActionNode
        name="RaiseForkAboveDropoffPose"
        PalletPose="{DetectedDropoffPose}"
        PalletThickness="0.155"
        PalletBottomPadding="0.025"
        AscendingOvershootOffset="0.15"
        TickDescendHeight="{TickDescendHeight}"/>
      <MoveActionNode
        name="MoveOnTopOfDropoffPose"
        TargetPose="{DetectedDropoffPose}"
        TargetPoseOffset="-0.65"
        Controller="AflLocalPlanner"
        Planner="GlobalPlanner"/>
      <ForkTickDescend
        name="ForkTickDescendToDropoffPose"
        TargetHeight="{TickDescendHeight}"/>
      <MoveActionNode
        name="BackAway"
        TargetPose="{DetectedDropoffPose}"
        TargetPoseOffset="1.1"
        Controller="TebLocalPlannerROS"
        Planner="GlobalPlanner"/>
      <SleepNode
        name="SleepBeforeHeightDescend"
        SleepTimeInSeconds="2.0"/>
      <ForkActionNode
        name="LowerForkCloseToGround"
        TargetHeight="0.1"/>
    </Sequence>
  </BehaviorTree>
</root>
